import{d as v}from"./chunk-4e6ec2d8.js";import{r as i,h as m,v as S}from"./chunk-52a8d9e0.js";const I=v("order",()=>{const r=i({totalPrice:0,start:"",end:"",people:{adults:0,children:0}}),o=i(new Map);m(()=>{console.log("inin"),f()});const n=S(()=>{let e=0;for(const[l,t]of o.value)e+=t.count*t.room.totalPrice;return e});function s(e){e.start!==void 0&&(r.value.start=e.start),e.end!==void 0&&(r.value.end=e.end),e.totalPrice!==void 0&&(r.value.totalPrice=e.totalPrice),e.people!==void 0&&(r.value.people=e.people),a()}function c(e,l){o.value.set(e,l),r.value.totalPrice=n.value,a()}function d(e){o.value.delete(e),r.value.totalPrice=n.value,a()}function u(){o.value.clear(),r.value.totalPrice=0,a()}function a(){localStorage.setItem("orderDetails",JSON.stringify(Array.from(o.value))),localStorage.setItem("orderInfo",JSON.stringify(r.value))}function f(){try{const e=localStorage.getItem("orderDetails");if(e){const t=new Map(JSON.parse(e));o.value=t}const l=localStorage.getItem("orderInfo");if(l){const t=JSON.parse(l);r.value=t}}catch(e){console.log("[訂單資料錯誤]",e)}}return{orders:o,orderInfo:r,total:n,updateOrder:c,removeOrder:d,clearOrders:u,updateOrderInfo:s}});export{I as u};
